<!-- Dashboard : à injecter dans #content -->
<section class="dashboard-card card">
  <div class="dashboard-header">
    <h1>Tableau de bord</h1>
    <div class="dashboard-controls">
      <button id="btnRefreshDashboard" class="btn-secondary">Rafraîchir</button>
    </div>
  </div>

  <div class="dashboard-stats">
    <div class="stat-card">
      <div class="stat-title">Utilisateurs</div>
      <div class="stat-value" id="countUsers">—</div>
      <div class="stat-sub">Nombre total d'utilisateurs</div>
    </div>

    <div class="stat-card">
      <div class="stat-title">Fiches SPA</div>
      <div class="stat-value" id="countSPAs">—</div>
      <div class="stat-sub">Total des fiches de présence</div>
    </div>

    <div class="stat-card">
      <div class="stat-title">Permanences</div>
      <div class="stat-value" id="countPermanences">—</div>
      <div class="stat-sub">Plans de permanence enregistrés</div>
    </div>
  </div>

  <div class="dashboard-main">
    <div class="chart-card">
      <h3>Fiches SPA (dernières 14 jours)</h3>
      <div id="spaBars" class="spa-bars"></div>
    </div>

    <div class="lists-card">
      <h3>Récents</h3>
      <div class="recent-box">
        <h4>Dernières SPA</h4>
        <ul id="recentSpaList" class="recent-list"> </ul>
      </div>
      <div class="recent-box">
        <h4>Dernières Permanences</h4>
        <ul id="recentPermList" class="recent-list"> </ul>
      </div>
    </div>
  </div>
</section>

<style>
  /* Styles dashboard */
.dashboard-card { max-width:1200px; margin:18px auto; font-family:Inter,Arial,Helvetica; }
.card { background:#fff; border-radius:12px; padding:20px; box-shadow:0 8px 30px rgba(12,20,40,0.06); }
.dashboard-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
.dashboard-header h1 { margin:0; font-size:20px; color:#0f1724; }
.btn-secondary { padding:8px 12px; border-radius:8px; border:none; background:#eef2f7; cursor:pointer; }

.dashboard-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:16px; }
.stat-card { background:#f8fafc; padding:14px; border-radius:10px; text-align:center; border:1px solid #eef2f7; }
.stat-title { color:#6b7280; font-size:13px; margin-bottom:6px; font-weight:600; text-transform:uppercase; }
.stat-value { font-size:28px; font-weight:800; color:#0f1724; }
.stat-sub { font-size:12px; color:#6b7280; margin-top:6px; }

.dashboard-main {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 14px;
  align-items: start; /* <-- important */
}
.chart-card {
  background:#fff;
  padding:12px;
  border-radius:8px;
  border:1px solid #eef2f7;
  min-height: 220px; /* empêche la carte d'être trop petite/étranglée */
  box-sizing: border-box;
}
.lists-card { display:flex; flex-direction:column; gap:12px; }
.recent-box { background:#fff; padding:10px; border-radius:8px; border:1px solid #eef2f7; }
.recent-list { list-style:none; margin:8px 0 0; padding:0; max-height:200px; overflow:auto; }
.recent-list li { padding:8px; border-radius:6px; background:#fbfdff; margin-bottom:8px; font-size:13px; color:#0f1724; display:flex; justify-content:space-between; gap:8px; }
.recent-list li small { color:#6b7280; font-size:12px; }

@media (max-width:900px){
  .dashboard-main { grid-template-columns: 1fr; }
  .dashboard-stats { grid-template-columns:1fr; }
}
/* canvas removed — spa-bars used instead */

.spa-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}
.spa-bar-row {
  display: flex;
  align-items: center;
  gap: 10px;
}
.spa-bar-label {
  width: 110px;
  font-size: 12px;
  color: #374151;
  flex-shrink: 0;
}
.spa-bar-track {
  flex: 1;
  height: 12px;
  background: #eef2f7;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
}
.spa-bar-fill {
  height: 100%;
  background: linear-gradient(90deg,#2b8aef,#1f6fd6);
  border-radius: 8px;
  transition: width 360ms ease;
}
.spa-bar-count {
  width: 42px;
  text-align: right;
  font-weight: 700;
  color: #0f1724;
  font-size: 13px;
  flex-shrink: 0;
}

/* responsive */
@media (max-width: 700px) {
  .spa-bar-label { width: 95px; font-size: 11px; }
  .spa-bar-count { width: 36px; font-size: 12px; }
}

/* ...existing code... */
</style>